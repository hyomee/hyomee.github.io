# JPA 연관 관계

객체지향 프로그램 모델을 유지하면서 데이터베이스와의 관계를 표현하는데 JPA에서 제공하는 다양한 연관관계 매핑을 위한 어노테이션을 제공하는데 다음과 같다.&#x20;

* @OneToOne: 일대일 관계\
  양방향 매핑이 가능하며, 대상 엔티티와 매핑할 때는 @JoinColumn 어노테이션을 사용.
* @OneToMany: 일대다 관계\
  단방향 매핑 또는 양방향 매핑으로 설정할 수 있으며. 대상 엔티티에는 @ManyToOne 어노테이션을 사용
* &#x20;@ManyToOne: 다대일 관계\
  대상 엔티티와 매핑할 때는 @JoinColumn 어노테이션을 사용합니다.&#x20;
* @ManyToMany: 다대다 관계\
  양방향 매핑이 가능하며, 연결 테이블을 사용하여 매핑합니다.

## 연관 관계 매핑 시 고려 사항

엔티티들은 대부분 다른 엔티티와 연관 관계가 있고,  1:1, 1:N, N:1, N:N의 방향성을 가지고 있어서 연관 관계의 주인을 정해야 한다

### 1. 다중성

* JPA에서는 어노테이션을 통해서 연관제관계를  제공 하고 DB와 매핑을 하기 위해서 존재 하므로 데이터 베이스 관점에서 고민 해야 한다.
* 연관 관계 :&#x20;
  * 다대일 ( N : 1 )  - @ManyToOne :&#x20;
  * 일대다 ( 1 : N )  - @OneToMany :&#x20;
  * 일대일 ( 1 : 1 )   - @OneToOne :&#x20;
  * 다대다 ( N : N ) - @ManyToMany

### 2.  객체는  단방향만 존재

* DB의 테이블은 외래키의 조인을 통해서 양방향성을 가진다.
* 객체는 단방향, 양방향 연관 관계를 설명 하지만 사실은 단방향이 두개 이다.&#x20;
  * 고객은 여러 개의 상품을 가진다.&#x20;
  * 상품을 구매한 고객이 있다

### 3. 연관 관계의 주인

* 객체의 양방향성은 A->B, B->A 처럼 2군데에서 일어 나므로 테이블의 외래키 를 관리 할 객체를 선정 하는 것이 중요하다.
* 연관 관계의 주인은 외래키를 관리 하는 참조.
* 주인 반대편은 외래키에 영향을 주지 않고 단순 읽기만 할 수 있다.
